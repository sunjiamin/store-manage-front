{"version":3,"sources":["webpack:///src/views/sys/role-manage/roleManage.vue","webpack:///./src/views/sys/role-manage/roleManage.vue?1782","webpack:///./src/views/sys/role-manage/roleManage.vue"],"names":["roleManage","name","data","_this","this","loading","treeLoading","submitPermLoading","sortColumn","sortType","modalType","roleModalVisible","permModalVisible","modalTitle","roleForm","roleFormValidate","required","message","trigger","submitLoading","selectList","selectCount","columns","type","width","align","title","key","sortable","render","h","params","row","defaultRole","props","size","style","marginRight","on","click","cancelDefault","setDefault","editPerm","edit","remove","pageNumber","pageSize","total","permData","editRolePermId","selectPermList","selectAllFlag","methods","init","getRoleList","getPermList","changePage","v","changePageSize","changeSort","e","order","_this2","sort","getRequest","then","res","success","result","content","totalElements","_this3","deleteDisableNode","that","forEach","status","disabled","children","length","cancelRole","submitRole","_this4","$refs","validate","valid","url","postRequest","$Message","addRole","access","attr","str","stringify_default","roleInfo","JSON","parse","_this5","$Modal","confirm","onOk","deleteRequest","ids","id","_this6","isDefault","_this7","clearSelectAll","table","selectAll","changeSelect","delAll","_this8","warning","substring","rolePerms","permissions","checkPermTree","p","hasPerm","selected","flag","i","selectTreeAll","select","selectedTreeAll","submitPermEdit","_this9","permIds","tree","getSelectedNodes","cancelPermEdit","mounted","role_manage_roleManage","_vm","_h","$createElement","_c","_self","staticClass","attrs","icon","_v","show-icon","_s","ref","border","on-sort-change","on-selection-change","justify","current","page-size","page-size-opts","show-total","show-elevator","show-sizer","on-change","on-page-size-change","mask-closable","model","value","callback","$$v","expression","label-width","rules","label","prop","placeholder","$set","slot","multiple","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/18.64a73a14548fb8431ea2.js","sourcesContent":["<style lang=\"less\">\n@import \"./roleManage.less\";\n</style>\n<template>\n    <div class=\"search\">\n        <Row>\n            <Col>\n                <Card>\n                    <Row class=\"operation\">\n                        <Button @click=\"addRole\" type=\"primary\" icon=\"plus-round\">添加角色</Button>\n                        <Button @click=\"delAll\" type=\"ghost\" icon=\"trash-a\">批量删除</Button>\n                        <Button @click=\"init\" type=\"ghost\" icon=\"refresh\">刷新</Button>\n                    </Row>\n                     <Row>\n                        <Alert show-icon>\n                            已选择 <span class=\"select-count\">{{selectCount}}</span> 项\n                            <a class=\"select-clear\" @click=\"clearSelectAll\">清空</a>\n                        </Alert>\n                    </Row>\n                    <Row class=\"margin-top-10 searchable-table-con1\">\n                        <Table :loading=\"loading\" border :columns=\"columns\" :data=\"data\"\n                               ref=\"table\" sortable=\"custom\" @on-sort-change=\"changeSort\" @on-selection-change=\"changeSelect\"></Table>\n                    </Row>\n                    <Row type=\"flex\" justify=\"end\" class=\"code-row-bg page\">\n                        <Page :current=\"this.pageNumber\" :total=\"total\" :page-size=\"this.pageSize\" @on-change=\"changePage\" @on-page-size-change=\"changePageSize\" :page-size-opts=\"[10,20,50,100]\" size=\"small\" show-total show-elevator show-sizer></Page>\n                    </Row>\n                </Card>\n            </Col>\n        </Row>\n        <Modal :title=\"modalTitle\" v-model=\"roleModalVisible\" :mask-closable='false' :width=\"500\">\n          <Form ref=\"roleForm\" :model=\"roleForm\" :label-width=\"80\" :rules=\"roleFormValidate\">\n            <FormItem label=\"角色名称\" prop=\"name\">\n              <Input v-model=\"roleForm.name\" placeholder=\"按照Spring Security约定建议以‘ROLE_’开头\"/>\n            </FormItem>\n          </Form>\n          <div slot=\"footer\">\n            <Button type=\"text\" @click=\"cancelRole\">取消</Button>\n            <Button type=\"primary\" :loading=\"submitLoading\" @click=\"submitRole\">提交</Button>\n          </div>\n        </Modal>\n        <Modal title=\"分配权限(点击选择)\" v-model=\"permModalVisible\" :mask-closable='false' :width=\"500\">\n          <Tree ref=\"tree\" :data=\"permData\" multiple></Tree>\n          <Spin size=\"large\" v-if=\"treeLoading\"></Spin>\n          <div slot=\"footer\">\n            <Button type=\"text\" @click=\"cancelPermEdit\">取消</Button>\n            <Button type=\"ghost\" @click=\"selectTreeAll\">全选/反选</Button>\n            <Button type=\"primary\" :loading=\"submitPermLoading\" @click=\"submitPermEdit\">提交</Button>\n          </div>\n        </Modal>\n    </div>\n</template>\n\n<script>\nexport default {\n  name: \"role-manage\",\n  data() {\n    return {\n      loading: true,\n      treeLoading: true,\n      submitPermLoading: false,\n      sortColumn: \"createTime\",\n      sortType: \"desc\",\n      modalType: 0,\n      roleModalVisible: false,\n      permModalVisible: false,\n      modalTitle: \"\",\n      roleForm: {\n        name: \"\"\n      },\n      roleFormValidate: {\n        name: [{ required: true, message: \"角色名称不能为空\", trigger: \"blur\" }]\n      },\n      submitLoading: false,\n      selectList: [],\n      selectCount: 0,\n      columns: [\n        {\n          type: \"selection\",\n          width: 60,\n          align: \"center\"\n        },\n        {\n          title: \"角色名称\",\n          key: \"name\",\n          sortable: true\n        },\n        {\n          title: \"创建时间\",\n          key: \"createTime\",\n          sortable: true,\n          sortType: \"desc\"\n        },\n        {\n          title: \"更新时间\",\n          key: \"updateTime\",\n          sortable: true\n        },\n        {\n          title: \"是否设置为注册用户默认角色\",\n          key: \"defaultRole\",\n          align: \"center\",\n          render: (h, params) => {\n            if (params.row.defaultRole) {\n              return h(\"div\", [\n                h(\n                  \"Button\",\n                  {\n                    props: {\n                      type: \"success\",\n                      size: \"small\"\n                    },\n                    style: {\n                      marginRight: \"5px\"\n                    },\n                    on: {\n                      click: () => {\n                        this.cancelDefault(params.row);\n                      }\n                    }\n                  },\n                  \"取消默认\"\n                )\n              ]);\n            } else {\n              return h(\"div\", [\n                h(\n                  \"Button\",\n                  {\n                    props: {\n                      type: \"info\",\n                      size: \"small\"\n                    },\n                    style: {\n                      marginRight: \"5px\"\n                    },\n                    on: {\n                      click: () => {\n                        this.setDefault(params.row);\n                      }\n                    }\n                  },\n                  \"设为默认\"\n                )\n              ]);\n            }\n          }\n        },\n        {\n          title: \"操作\",\n          key: \"action\",\n          align: \"center\",\n          width: 300,\n          render: (h, params) => {\n            return h(\"div\", [\n              h(\n                \"Button\",\n                {\n                  props: {\n                    type: \"warning\",\n                    size: \"small\"\n                  },\n                  style: {\n                    marginRight: \"5px\"\n                  },\n                  on: {\n                    click: () => {\n                      this.editPerm(params.row);\n                    }\n                  }\n                },\n                \"分配权限\"\n              ),\n              h(\n                \"Button\",\n                {\n                  props: {\n                    type: \"primary\",\n                    size: \"small\"\n                  },\n                  style: {\n                    marginRight: \"5px\"\n                  },\n                  on: {\n                    click: () => {\n                      this.edit(params.row);\n                    }\n                  }\n                },\n                \"编辑\"\n              ),\n              h(\n                \"Button\",\n                {\n                  props: {\n                    type: \"error\",\n                    size: \"small\"\n                  },\n                  on: {\n                    click: () => {\n                      this.remove(params.row);\n                    }\n                  }\n                },\n                \"删除\"\n              )\n            ]);\n          }\n        }\n      ],\n      data: [],\n      pageNumber: 1,\n      pageSize: 10,\n      total: 0,\n      permData: [],\n      editRolePermId: \"\",\n      selectPermList: [],\n      selectAllFlag: false,\n    };\n  },\n  methods: {\n    init() {\n      this.getRoleList();\n      // 获取所有菜单权限树\n      this.getPermList();\n    },\n    changePage(v) {\n      this.pageNumber = v;\n      this.getRoleList();\n    },\n    changePageSize(v) {\n      this.pageSize = v;\n      this.getRoleList();\n    },\n    changeSort(e) {\n      this.sortColumn = e.key;\n      this.sortType = e.order;\n      if (e.order === \"normal\") {\n        this.sortType = \"\";\n      }\n      this.getRoleList();\n    },\n    getRoleList() {\n      this.loading = true;\n      let params = {\n        pageNumber: this.pageNumber,\n        pageSize: this.pageSize,\n        sort: \"createTime\"\n      };\n      this.getRequest(\"/role/getAllByPage\", params).then(res => {\n        this.loading = false;\n        if (res.success === true) {\n          this.data = res.result.content;\n          this.total = res.result.totalElements;\n        }\n      });\n    },\n    getPermList() {\n      this.treeLoading = true;\n      this.getRequest(\"/permission/getAllList\").then(res => {\n        this.treeLoading = false;\n        if (res.success === true) {\n          this.deleteDisableNode(res.result);\n          this.permData = res.result;\n        }\n      });\n    },\n    // 递归删除禁用节点\n    deleteDisableNode(permData) {\n      let that = this;\n      permData.forEach(function(e) {\n        if (e.status === 1) {\n          e.title += \"(已禁用)\"\n          e.disabled = true\n        }\n        if (e.children && e.children.length > 0) {\n          that.deleteDisableNode(e.children);\n        }\n      });\n    },\n    cancelRole() {\n      this.roleModalVisible = false;\n    },\n    submitRole() {\n      this.$refs.roleForm.validate(valid => {\n        if (valid) {\n          let url = \"/role/save\";\n          if (this.modalType === 1) {\n            // 编辑用户\n            url = \"/role/edit\";\n          }\n          this.submitLoading = true;\n          this.postRequest(url, this.roleForm).then(res => {\n            this.submitLoading = false;\n            if (res.success === true) {\n              this.$Message.success(\"操作成功\");\n              this.init();\n              this.roleModalVisible = false;\n            }\n          });\n        }\n      });\n    },\n    addRole() {\n      this.modalType = 0;\n      this.modalTitle = \"添加角色\";\n      this.roleForm = {\n        name: \"\",\n        access: null\n      };\n      this.roleModalVisible = true;\n    },\n    edit(v) {\n      this.modalType = 1;\n      this.modalTitle = \"编辑角色\";\n      // 转换null为\"\"\n      for (let attr in v) {\n        if (v[attr] === null) {\n          v[attr] = \"\";\n        }\n      }\n      let str = JSON.stringify(v);\n      let roleInfo = JSON.parse(str);\n      this.roleForm = roleInfo;\n      this.roleModalVisible = true;\n    },\n    remove(v) {\n      this.$Modal.confirm({\n        title: \"确认删除\",\n        content: \"您确认要删除角色 \" + v.name + \" ?\",\n        onOk: () => {\n          this.deleteRequest(\"/role/delAllByIds\", { ids: v.id }).then(res => {\n            if (res.success === true) {\n              this.$Message.success(\"删除成功\");\n              this.init();\n            }\n          });\n        }\n      });\n    },\n    setDefault(v) {\n      this.$Modal.confirm({\n        title: \"确认设置\",\n        content: \"您确认要设置所选的 \" + v.name + \" 为注册用户默认角色?\",\n        onOk: () => {\n          let params = {\n            id: v.id,\n            isDefault: true\n          };\n          this.postRequest(\"/role/setDefault\", params).then(res => {\n            if (res.success === true) {\n              this.$Message.success(\"操作成功\");\n              this.init();\n            }\n          });\n        }\n      });\n    },\n    cancelDefault(v) {\n      this.$Modal.confirm({\n        title: \"确认取消\",\n        content: \"您确认要取消所选的 \" + v.name + \" 角色为默认?\",\n        onOk: () => {\n          let params = {\n            id: v.id,\n            isDefault: false\n          };\n          this.postRequest(\"/role/setDefault\", params).then(res => {\n            if (res.success === true) {\n              this.$Message.success(\"操作成功\");\n              this.init();\n            }\n          });\n        }\n      });\n    },\n    clearSelectAll() {\n      this.$refs.table.selectAll(false);\n    },\n    changeSelect(e) {\n      this.selectList = e;\n      this.selectCount = e.length;\n    },\n    delAll() {\n      if (this.selectCount <= 0) {\n        this.$Message.warning(\"您还未选择要删除的数据\");\n        return;\n      }\n      this.$Modal.confirm({\n        title: \"确认删除\",\n        content: \"您确认要删除所选的 \" + this.selectCount + \" 条数据?\",\n        onOk: () => {\n          let ids = \"\";\n          this.selectList.forEach(function(e) {\n            ids += e.id + \",\";\n          });\n          ids = ids.substring(0, ids.length - 1);\n          this.deleteRequest(\"/role/delAllByIds\", { ids: ids }).then(res => {\n            if (res.success === true) {\n              this.$Message.success(\"删除成功\");\n              this.init();\n            }\n          });\n        }\n      });\n    },\n    editPerm(v) {\n      this.editRolePermId = v.id;\n      // 匹配勾选\n      let rolePerms = v.permissions;\n      // 递归判断子节点\n      this.checkPermTree(this.permData, rolePerms);\n      this.permModalVisible = true;\n    },\n    // 递归判断子节点\n    checkPermTree(permData, rolePerms) {\n      let that = this;\n      permData.forEach(function(p) {\n        if (that.hasPerm(p, rolePerms)) {\n          p.selected = true;\n        } else {\n          p.selected = false;\n        }\n        if (p.children && p.children.length > 0) {\n          that.checkPermTree(p.children, rolePerms);\n        }\n      });\n    },\n    // 判断角色拥有的权限节点勾选\n    hasPerm(p, rolePerms) {\n      let flag = false;\n      for (let i = 0; i < rolePerms.length; i++) {\n        if (p.id === rolePerms[i].id) {\n          flag = true;\n          break;\n        }\n      }\n      if (flag) {\n        return true;\n      }\n      return false;\n    },\n    // 全选反选\n    selectTreeAll() {\n      this.selectAllFlag = !this.selectAllFlag\n      let select = this.selectAllFlag\n      this.selectedTreeAll(this.permData, select)\n    },\n    // 递归全选节点\n    selectedTreeAll(permData, select) {\n      let that = this;\n      permData.forEach(function(e) {\n        e.selected = select\n        if (e.children && e.children.length > 0) {\n          that.selectedTreeAll(e.children, select);\n        }\n      });\n    },\n    submitPermEdit() {\n      this.submitPermLoading = true;\n      let permIds = \"\";\n      let selectedNodes = this.$refs.tree.getSelectedNodes();\n      selectedNodes.forEach(function(e) {\n        permIds += e.id + \",\";\n      });\n      permIds = permIds.substring(0, permIds.length - 1);\n      this.postRequest(\"/role/editRolePerm/\" + this.editRolePermId, {\n        permIds: permIds\n      }).then(res => {\n        this.submitPermLoading = false;\n        if (res.success === true) {\n          this.$Message.success(\"操作成功\");\n          this.init();\n          this.permModalVisible = false;\n        }\n      });\n    },\n    cancelPermEdit() {\n      this.permModalVisible = false;\n    }\n  },\n  mounted() {\n    this.init();\n  }\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/sys/role-manage/roleManage.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search\"},[_c('Row',[_c('Col',[_c('Card',[_c('Row',{staticClass:\"operation\"},[_c('Button',{attrs:{\"type\":\"primary\",\"icon\":\"plus-round\"},on:{\"click\":_vm.addRole}},[_vm._v(\"添加角色\")]),_vm._v(\" \"),_c('Button',{attrs:{\"type\":\"ghost\",\"icon\":\"trash-a\"},on:{\"click\":_vm.delAll}},[_vm._v(\"批量删除\")]),_vm._v(\" \"),_c('Button',{attrs:{\"type\":\"ghost\",\"icon\":\"refresh\"},on:{\"click\":_vm.init}},[_vm._v(\"刷新\")])],1),_vm._v(\" \"),_c('Row',[_c('Alert',{attrs:{\"show-icon\":\"\"}},[_vm._v(\"\\n                        已选择 \"),_c('span',{staticClass:\"select-count\"},[_vm._v(_vm._s(_vm.selectCount))]),_vm._v(\" 项\\n                        \"),_c('a',{staticClass:\"select-clear\",on:{\"click\":_vm.clearSelectAll}},[_vm._v(\"清空\")])])],1),_vm._v(\" \"),_c('Row',{staticClass:\"margin-top-10 searchable-table-con1\"},[_c('Table',{ref:\"table\",attrs:{\"loading\":_vm.loading,\"border\":\"\",\"columns\":_vm.columns,\"data\":_vm.data,\"sortable\":\"custom\"},on:{\"on-sort-change\":_vm.changeSort,\"on-selection-change\":_vm.changeSelect}})],1),_vm._v(\" \"),_c('Row',{staticClass:\"code-row-bg page\",attrs:{\"type\":\"flex\",\"justify\":\"end\"}},[_c('Page',{attrs:{\"current\":this.pageNumber,\"total\":_vm.total,\"page-size\":this.pageSize,\"page-size-opts\":[10,20,50,100],\"size\":\"small\",\"show-total\":\"\",\"show-elevator\":\"\",\"show-sizer\":\"\"},on:{\"on-change\":_vm.changePage,\"on-page-size-change\":_vm.changePageSize}})],1)],1)],1)],1),_vm._v(\" \"),_c('Modal',{attrs:{\"title\":_vm.modalTitle,\"mask-closable\":false,\"width\":500},model:{value:(_vm.roleModalVisible),callback:function ($$v) {_vm.roleModalVisible=$$v},expression:\"roleModalVisible\"}},[_c('Form',{ref:\"roleForm\",attrs:{\"model\":_vm.roleForm,\"label-width\":80,\"rules\":_vm.roleFormValidate}},[_c('FormItem',{attrs:{\"label\":\"角色名称\",\"prop\":\"name\"}},[_c('Input',{attrs:{\"placeholder\":\"按照Spring Security约定建议以‘ROLE_’开头\"},model:{value:(_vm.roleForm.name),callback:function ($$v) {_vm.$set(_vm.roleForm, \"name\", $$v)},expression:\"roleForm.name\"}})],1)],1),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{attrs:{\"type\":\"text\"},on:{\"click\":_vm.cancelRole}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('Button',{attrs:{\"type\":\"primary\",\"loading\":_vm.submitLoading},on:{\"click\":_vm.submitRole}},[_vm._v(\"提交\")])],1)],1),_vm._v(\" \"),_c('Modal',{attrs:{\"title\":\"分配权限(点击选择)\",\"mask-closable\":false,\"width\":500},model:{value:(_vm.permModalVisible),callback:function ($$v) {_vm.permModalVisible=$$v},expression:\"permModalVisible\"}},[_c('Tree',{ref:\"tree\",attrs:{\"data\":_vm.permData,\"multiple\":\"\"}}),_vm._v(\" \"),(_vm.treeLoading)?_c('Spin',{attrs:{\"size\":\"large\"}}):_vm._e(),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{attrs:{\"type\":\"text\"},on:{\"click\":_vm.cancelPermEdit}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('Button',{attrs:{\"type\":\"ghost\"},on:{\"click\":_vm.selectTreeAll}},[_vm._v(\"全选/反选\")]),_vm._v(\" \"),_c('Button',{attrs:{\"type\":\"primary\",\"loading\":_vm.submitPermLoading},on:{\"click\":_vm.submitPermEdit}},[_vm._v(\"提交\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7722ad3d\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/sys/role-manage/roleManage.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7722ad3d\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./roleManage.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./roleManage.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./roleManage.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7722ad3d\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./roleManage.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/sys/role-manage/roleManage.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}